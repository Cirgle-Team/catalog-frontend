<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="/lib/bootstrap.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/04ed03d0b6.js" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="/css/common.css">
        <link rel="stylesheet" href="/css/font.css">
        <link rel="stylesheet" href="/css/streak.css">

        <!--<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">-->
        <meta name="viewport" content="width=device-width">
        
        <title>Catalog</title>
        
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-title" content="catalog">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        
        <link rel="shortcut icon" sizes="256x256" href="/favicon.ico">
        <link rel="apple-touch-icon" sizes="256x256" href="/favicon.ico">
        <link rel="apple-touch-icon-precomposed" sizes="256x256" href="/favicon.ico">
    </head>

    <body>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <a class="navbar-brand" href="/"><img src="/src/logo.png" alt="" width="20" height="20"> Catalog</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link" href="/index">í™ˆí™”ë©´</a>
                    <a class="nav-link" href="/setting">ì„¤ì •</a>
                </div>
            </div>
        </nav>
        <div class="main-container shadow">
            <div class="content-container">
                <h4 class="card-title">Recent Logs</h4>
                <div class="content-card">
                    <div class="streak"></div>
                    <p style="margin:20px 0px 0px 0px; font-family: 'Pretendard-Regular'; color:#999;">
                        <i class="fa-solid fa-circle-info"></i>
                        ê±´ê°•ì´ ã…ˆë˜ê¸° ì‹œì‘í–ˆì–´ìš”!
                    </p>
                    <i class="fa-solid fa-arrow-right fa-lg" style="color:#777; margin:30px 0px 10px 0px;"></i>
                </div>

                <h4 class="card-title">Categories</h4>
                <div class="content-card">
                    <div class="progress-container" style="margin-top:3px;">
                        <div class="progress" role="progressbar" style="height:20px; margin-bottom:2px;">
                            <div class="progress-bar" style="width: 10%; background-color: #7f4f24;"></div>
                            <div class="progress-bar" style="width: 10%; background-color: #a68a64;"></div>
                            <div class="progress-bar" style="width: 60%; background-color: #936639;"></div>
                            <div class="progress-bar" style="width: 10%; background-color: #582f0e;"></div>
                        </div>
                        <div class="index-container">
                            <div class="index-box">
                                <div class="index-indicator" style="background-color:#7f4f24;"></div>
                                <small>ì»¤í”¼<small>(10%)</small></small>
                            </div>
                            <div class="index-box">
                                <div class="index-indicator" style="background-color:#a68a64;"></div>
                                <small>ì—ë„ˆì§€ìŒë£Œ<small>(10%)</small></small>
                            </div>
                            <div class="index-box">
                                <div class="index-indicator" style="background-color:#936639;"></div>
                                <small>ë””ì €íŠ¸<small>(10%)</small></small>
                            </div>
                            <div class="index-box">
                                <div class="index-indicator" style="background-color:#582f0e;"></div>
                                <small>ê¸°íƒ€<small>(10%)</small></small>
                            </div>
                        </div>
                    </div>
                    <i class="fa-solid fa-arrow-right fa-lg" style="color:#777; margin:30px 0px 10px 0px;"></i>
                </div>
            </div>
        </div>

        <div class="modal fade" id="recordModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header" style="border:none;">
                        <h1 class="modal-title fs-5">ê¸°ë¡í•˜ê¸°</h1>
                    </div>
                    <div class="modal-body">
                        <select id="cat" class="form-select mb-2" onchange="catChange()">
                            <option value="no" selected>ì¹´í…Œê³ ë¦¬</option>
                            <option value="1">ì»¤í”¼</option>
                            <option value="2">ì—ë„ˆì§€ìŒë£Œ</option>
                            <option value="3">ë””ì €íŠ¸</option>
                            <option value="4">ğŸ¸ ê¸°íƒ€</option>
                        </select>
                        <select id="menu" class="form-select mb-2" onchange="menuChange()">
                            <option value="no" selected>ë©”ë‰´</option>
                        </select>
                        <div id="newMenu" style="display:none;">
                            <input class="form-control mb-2" placeholder="ë©”ë‰´ëª…">
                            <input id="newDensity" type=number inputmode="numeric" max="999" pattern="[0-9]*" class="form-control" placeholder="ì¹´í˜ì¸ í•¨ëŸ‰" onchange="if(this.value > 999) this.value=999;">
                        </div>
                    </div>
                    <div class="modal-footer" style="border:none;">
                        <button type="button" class="btn btn-sm btn-outline-primary"
                                data-bs-dismiss="modal">ì·¨ì†Œ</button>
                        <button type="button" class="btn btn-sm btn-primary">ê¸°ë¡í•˜ê¸°</button>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

<script>    
    if (!localStorage.getItem('refreshToken')) {
        location.href="./login";
    }

    document.querySelector('#newDensity').addEventListener('keyup', function(){
        if(document.querySelector('#newDensity').value > 999) {
            document.querySelector('#newDensity').value=999;
        }
    });

    function catChange() {
        if (cat.value == "no") {
            menu.innerHTML = '<option value="no" selected>ë©”ë‰´</option>';
        } else if (cat.value == "1") {
            //ì»¤í”¼
            menu.innerHTML = '<option value="no" selected>ë©”ë‰´</option>';
            menu.innerHTML += '<option value="1">ì•„ë©”ë¦¬ì¹´ë…¸</option>';
            menu.innerHTML += '<option value="2">ì¹´í˜ë¼ë–¼</option>';
            menu.innerHTML += '<option value="self">ì§ì ‘ ì‘ì„±í•˜ê¸°</option>';
        } else if (cat.value == "2") {
            //ì—ë„ˆì§€ìŒë£Œ
            menu.innerHTML = '<option value="no" selected>ë©”ë‰´</option>';
            menu.innerHTML += '<option value="1">ëª¬ìŠ¤í„°ë¥˜</option>';
            menu.innerHTML += '<option value="2">í•«ì‹ìŠ¤ë¥˜</option>';
            menu.innerHTML += '<option value="3">ë ˆë“œë¶ˆ(250mL)</option>';
            menu.innerHTML += '<option value="4">ë ˆë“œë¶ˆ(355mL)</option>';
            menu.innerHTML += '<option value="self">ì§ì ‘ ì‘ì„±í•˜ê¸°</option>';
        } else if (cat.value == "3") {
            //ë””ì €íŠ¸
            menu.innerHTML = '<option value="no" selected>ë©”ë‰´</option>';
            menu.innerHTML += '<option value="1">ì´ˆì½” ì¡°ê° ì¼€ì´í¬</option>';
            menu.innerHTML += '<option value="self">ì§ì ‘ ì‘ì„±í•˜ê¸°</option>';
        } else if (cat.value == "4") {
            //ê¸°íƒ€
            menu.innerHTML = '<option value="no" selected>ë©”ë‰´</option>';
            menu.innerHTML += '<option value="1">ë°€í¬í‹°</option>';
            menu.innerHTML += '<option value="2">ë…¹ì°¨</option>';
            menu.innerHTML += '<option value="self">ì§ì ‘ ì‘ì„±í•˜ê¸°</option>';
        } else {
            menu.innerHTML = '<option value="no" selected>ë©”ë‰´</option>';
            menu.innerHTML += '<option value="self">ì§ì ‘ ì‘ì„±í•˜ê¸°</option>';
        }
        menuChange();
    }

    function menuChange() {
        if (menu.value == "self") {
            newMenu.style.display = "block";
        } else {
            newMenu.style.display = "none";
        }
    }

    for (i = 0; i < 93; i++) {
        document.querySelector(".streak").innerHTML += '<div class="streak-unit"></div>';
    }

    document.querySelectorAll(".streak-unit")[0].style.backgroundColor="#90be6d";
    document.querySelectorAll(".streak-unit")[1].style.backgroundColor="#f9c74f";
    document.querySelectorAll(".streak-unit")[2].style.backgroundColor="#f8961e";
    document.querySelectorAll(".streak-unit")[3].style.backgroundColor="#f3722c";
    document.querySelectorAll(".streak-unit")[4].style.backgroundColor="#f94144";
    document.querySelectorAll(".streak-unit")[5].style.backgroundColor="#880000";

    /*
        Below 20% : #90be6d 
        Between 21% ~ 40% : #f9c74f
        Between 41% ~ 60% : #f8961e
        Between 61% ~ 80% : #f3722c
        Between 81% ~ 100% : #f94144
        Between 81% ~ 100% : #000000
    */

    /*
        #ddb892
        #b08968
        #7f5539
        #9c6644

        #a68a64
        #936639
        #7f4f24
        #582f0e
    */
</script>